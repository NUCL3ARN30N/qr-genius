<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Genius</title>
    <meta name="description" content="Create stunning QR codes with custom styles, embedded icons, and multiple data types.">
    <link rel="canonical" href="https://qr.genius-space.org">
    <link id="dynamic-favicon" rel="icon" type="image/svg+xml" href="">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,700;1,400;1,500&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0-rc.1/lib/qr-code-styling.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.6.0/fonts/remixicon.min.css">
    <link rel="stylesheet" href="https://www.nerdfonts.com/assets/css/webfont.css">
    <style>
:root{--bg:#08080a;--bg2:#111114;--card:#16161b;--inp:#1e1e25;--hov:#26262e;--brd:#2a2a33;--t1:#f0eff4;--t2:#9896a3;--t3:#6b6878;--ac:#6c5ce7;--acl:#a29bfe;--acg:rgba(108,92,231,.12);--ac2:#fd79a8;--ok:#00b894;--r1:8px;--r2:12px;--r3:16px;--sh:0 8px 48px rgba(0,0,0,.4);--tr:.2s cubic-bezier(.4,0,.2,1)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--t1);min-height:100vh;overflow-x:hidden}
.ambg{position:fixed;inset:0;z-index:0;pointer-events:none}
.ambg::before{content:'';position:absolute;top:-30%;left:-20%;width:600px;height:600px;background:radial-gradient(circle,rgba(108,92,231,.06) 0%,transparent 70%);animation:f1 20s ease-in-out infinite}
.ambg::after{content:'';position:absolute;bottom:-20%;right:-10%;width:500px;height:500px;background:radial-gradient(circle,rgba(253,121,168,.04) 0%,transparent 70%);animation:f2 25s ease-in-out infinite}
@keyframes f1{0%,100%{transform:translate(0,0)}50%{transform:translate(80px,60px)}}
@keyframes f2{0%,100%{transform:translate(0,0)}50%{transform:translate(-60px,-80px)}}
header{position:relative;z-index:10;padding:20px 40px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--brd);backdrop-filter:blur(20px);background:rgba(8,8,10,.85)}
.logo{display:flex;align-items:center;gap:16px;text-decoration:none}
.logo-icon{width:44px;height:44px;background:linear-gradient(135deg,var(--ac),var(--ac2));border-radius:10px;display:grid;place-items:center;font-size:18px;color:#fff;box-shadow:0 4px 20px rgba(108,92,231,.35);transition:transform .3s,box-shadow .3s}
.logo:hover .logo-icon{transform:rotate(-6deg) scale(1.05);box-shadow:0 6px 28px rgba(108,92,231,.5)}
.logo-text{display:flex;align-items:baseline;gap:6px}
.logo-text .p1{font-family:'Playfair Display',serif;font-size:28px;font-weight:700;letter-spacing:-.03em;background:linear-gradient(135deg,#fff,#ddd);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.logo-text .p2{font-family:'Playfair Display',serif;font-size:28px;font-weight:400;font-style:italic;letter-spacing:-.02em;background:linear-gradient(135deg,var(--acl),var(--ac2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.logo-text .dot{width:6px;height:6px;background:var(--ac2);border-radius:50%;display:inline-block;margin-left:2px;position:relative;top:-2px;box-shadow:0 0 8px var(--ac2)}
.hlinks{display:flex;align-items:center;gap:12px}
.hlink{display:inline-flex;align-items:center;gap:7px;padding:8px 14px;background:var(--card);border:1px solid var(--brd);border-radius:var(--r1);color:var(--t2);text-decoration:none;font-size:13px;font-weight:500;transition:all var(--tr)}
.hlink:hover{background:var(--hov);border-color:var(--t3);color:var(--t1)}
.hlink i{font-size:14px}
.app{position:relative;z-index:1;max-width:1400px;margin:0 auto;padding:32px 40px 80px;display:grid;grid-template-columns:1fr 420px;gap:32px;align-items:start}
.panel{background:var(--card);border:1px solid var(--brd);border-radius:var(--r3);overflow:hidden}
.ph{padding:18px 24px;border-bottom:1px solid var(--brd);display:flex;align-items:center;gap:10px;font-size:14px;font-weight:600}
.ph i{color:var(--acl);font-size:15px}
.pb{padding:24px}
.tabs{display:flex;gap:4px;padding:4px;background:var(--bg2);border-radius:var(--r2);margin-bottom:24px;overflow-x:auto}
.tab{flex:1;min-width:max-content;padding:10px 14px;border:none;background:0;color:var(--t2);font-family:inherit;font-size:12.5px;font-weight:500;border-radius:var(--r1);cursor:pointer;transition:all var(--tr);display:flex;align-items:center;justify-content:center;gap:5px;white-space:nowrap}
.tab:hover{color:var(--t1);background:var(--hov)}
.tab.on{background:var(--ac);color:#fff;box-shadow:0 2px 12px rgba(108,92,231,.3)}
.tab i{font-size:11px}
.fg{margin-bottom:18px}.fg:last-child{margin-bottom:0}
.fg label{display:block;font-size:12.5px;font-weight:500;color:var(--t2);margin-bottom:7px;letter-spacing:.02em}
.fg .hn{font-weight:400;color:var(--t3);font-size:11.5px}
input[type="text"],input[type="url"],input[type="email"],input[type="tel"],input[type="number"],input[type="datetime-local"],textarea,select{width:100%;padding:11px 14px;background:var(--inp);border:1px solid var(--brd);border-radius:var(--r1);color:var(--t1);font-family:'DM Sans',sans-serif;font-size:13.5px;transition:all var(--tr);outline:none}
input[type="datetime-local"]{color-scheme:dark}
input:focus,textarea:focus,select:focus{border-color:var(--ac);box-shadow:0 0 0 3px var(--acg)}
textarea{resize:vertical;min-height:80px}
select{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239896a3' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;padding-right:36px}
.cr{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.cpw{display:flex;align-items:center;gap:10px;padding:8px 12px;background:var(--inp);border:1px solid var(--brd);border-radius:var(--r1)}
.cpw input[type="color"]{width:32px;height:32px;border:none;background:none;cursor:pointer;padding:0;border-radius:6px}
.cpw input[type="color"]::-webkit-color-swatch-wrapper{padding:0}
.cpw input[type="color"]::-webkit-color-swatch{border-radius:6px;border:2px solid var(--brd)}
.cpw span{font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--t2)}
.hex-in{width:72px!important;padding:4px 6px!important;background:var(--bg)!important;border:1px solid var(--brd)!important;border-radius:4px!important;font-family:'JetBrains Mono',monospace!important;font-size:12px!important;color:var(--t1)!important;text-transform:uppercase;letter-spacing:.04em}
.hex-in:focus{border-color:var(--ac)!important;box-shadow:0 0 0 2px var(--acg)!important}
.ur-row{display:flex;gap:8px;width:100%;margin-top:12px}
.ur-btn{flex:1;padding:10px 12px;border:1px solid var(--brd);border-radius:var(--r1);background:var(--inp);color:var(--t2);font-family:inherit;font-size:12.5px;font-weight:500;cursor:pointer;transition:all var(--tr);display:flex;align-items:center;justify-content:center;gap:6px}
.ur-btn:hover:not(:disabled){background:var(--hov);border-color:var(--t3);color:var(--t1)}
.ur-btn:disabled{opacity:.3;cursor:not-allowed}
.ur-btn i{font-size:13px}
.icon-src-tabs{display:flex;gap:3px;padding:3px;background:var(--bg2);border-radius:var(--r1);margin-bottom:14px}
.icon-src-tab{flex:1;padding:7px 6px;border:none;background:0;color:var(--t3);font-family:inherit;font-size:11px;font-weight:500;border-radius:6px;cursor:pointer;transition:all var(--tr);text-align:center;white-space:nowrap}
.icon-src-tab:hover{color:var(--t2);background:var(--hov)}
.icon-src-tab.on{background:var(--ac);color:#fff}
.icon-src-content{display:none}.icon-src-content.on{display:block}
.cust-icon-row{display:flex;gap:8px;align-items:start}
.cust-icon-input{flex:1}
.cust-icon-input input{font-family:'JetBrains Mono',monospace!important;font-size:12.5px!important}
.cust-icon-preview{width:48px;height:48px;background:var(--inp);border:2px solid var(--brd);border-radius:var(--r1);display:grid;place-items:center;font-size:22px;color:var(--t2);flex-shrink:0;transition:all var(--tr);overflow:hidden}
.cust-icon-preview.ok{border-color:var(--ok);color:var(--t1)}
.cust-icon-preview img{width:28px;height:28px;object-fit:contain}
.icon-src-hint{font-size:11px;color:var(--t3);margin-top:6px;line-height:1.5}
.icon-src-hint a{color:var(--acl);text-decoration:none}
.icon-src-hint a:hover{text-decoration:underline}
.icon-src-hint code{font-family:'JetBrains Mono',monospace;font-size:10.5px;background:var(--bg);padding:1px 5px;border-radius:3px;color:var(--acl)}
.cust-color-row{display:flex;gap:8px;margin-top:10px;align-items:center}
.cust-color-row label{font-size:11.5px;color:var(--t3);margin:0;white-space:nowrap}
.cust-color-row .cpw{padding:5px 8px}
.cust-color-row .cpw input[type="color"]{width:24px;height:24px}
.cust-color-row .hex-in{width:62px!important;padding:3px 5px!important;font-size:11px!important}
.sg{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.so{padding:12px 8px;background:var(--inp);border:2px solid var(--brd);border-radius:var(--r1);cursor:pointer;text-align:center;transition:all var(--tr);font-size:11.5px;font-weight:500;color:var(--t2)}
.so:hover{border-color:var(--t3);color:var(--t1)}
.so.on{border-color:var(--ac);background:var(--acg);color:var(--acl)}
.so .sp{width:30px;height:30px;margin:0 auto 6px;display:grid;grid-template-columns:repeat(3,1fr);gap:2px}
.so .sp span{background:currentColor;border-radius:1px}
.so[data-style="rounded"] .sp span,.so[data-style="dots"] .sp span,.so[data-style="extra-rounded"] .sp span{border-radius:50%}
.so[data-style="classy"] .sp span{border-radius:2px}
.so[data-style="classy-rounded"] .sp span{border-radius:4px}
.ig{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}
.io{aspect-ratio:1;display:grid;place-items:center;background:var(--inp);border:2px solid var(--brd);border-radius:var(--r1);cursor:pointer;transition:all var(--tr);font-size:17px;color:var(--t2)}
.io:hover{border-color:var(--t3);color:var(--t1);transform:scale(1.05)}
.io.on{border-color:var(--ac);background:var(--acg);color:var(--acl)}
.ua{border:2px dashed var(--brd);border-radius:var(--r2);padding:20px;text-align:center;cursor:pointer;transition:all var(--tr);color:var(--t3);font-size:13px}
.ua:hover{border-color:var(--ac);background:var(--acg);color:var(--t2)}
.ua i{font-size:24px;margin-bottom:6px;display:block}
.ua.has{border-color:var(--ok);background:rgba(0,184,148,.05);color:var(--ok)}
input[type="range"]{width:100%;height:6px;-webkit-appearance:none;background:var(--hov);border-radius:3px;outline:none}
input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;background:var(--ac);border-radius:50%;cursor:pointer;box-shadow:0 2px 8px rgba(108,92,231,.3)}
.rl{display:flex;justify-content:space-between;font-size:11px;color:var(--t3);margin-top:4px}
.sd{height:1px;background:var(--brd);margin:22px 0}
.st{font-size:12px;font-weight:600;color:var(--t2);margin-bottom:14px;display:flex;align-items:center;gap:8px;text-transform:uppercase;letter-spacing:.06em}
.st i{color:var(--acl);font-size:13px}
.pp{position:sticky;top:32px}
.ppa{display:flex;flex-direction:column;align-items:center;padding:40px 24px 24px}
.qcw{background:#fff;border-radius:var(--r3);padding:24px;box-shadow:var(--sh);margin-bottom:24px;transition:all .3s}
#qo{width:280px;height:280px;display:grid;place-items:center}
#qo canvas,#qo svg{max-width:100%!important;max-height:100%!important}
.qph{text-align:center;color:#bbb}.qph i{font-size:48px;margin-bottom:12px;opacity:.2;display:block}.qph p{font-size:13px;color:#999}
.dr{display:grid;grid-template-columns:1fr 1fr;gap:10px;width:100%}
.db{padding:12px 16px;border:1px solid var(--brd);border-radius:var(--r1);background:var(--inp);color:var(--t1);font-family:inherit;font-size:13px;font-weight:500;cursor:pointer;transition:all var(--tr);display:flex;align-items:center;justify-content:center;gap:8px}
.db:hover{background:var(--hov);border-color:var(--ac)}
.db:disabled{opacity:.35;cursor:not-allowed;pointer-events:none}
.db i{font-size:14px}
.qi{margin-top:16px;padding:10px 14px;background:var(--inp);border-radius:var(--r1);font-size:11.5px;color:var(--t3);width:100%;text-align:center;word-break:break-all}
.qi code{font-family:'JetBrains Mono',monospace;color:var(--acl);background:var(--bg2);padding:2px 6px;border-radius:4px}
footer{position:relative;z-index:1;text-align:center;padding:32px 40px;border-top:1px solid var(--brd);color:var(--t3);font-size:12.5px}
footer a{color:var(--acl);text-decoration:none}footer a:hover{text-decoration:underline}
.tc{display:none}.tc.on{display:block}
.tr{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
.tr span{font-size:13px;color:var(--t2)}
.tg{width:44px;height:24px;background:var(--hov);border-radius:12px;position:relative;cursor:pointer;transition:background var(--tr);flex-shrink:0}
.tg.on{background:var(--ac)}
.tg::after{content:'';width:18px;height:18px;background:#fff;border-radius:50%;position:absolute;top:3px;left:3px;transition:transform var(--tr)}
.tg.on::after{transform:translateX(20px)}
.wf,.vf,.ef{display:grid;gap:14px}
.toast{position:fixed;bottom:32px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--card);border:1px solid var(--ac);color:var(--t1);padding:12px 22px;border-radius:var(--r2);font-size:13px;z-index:1000;box-shadow:var(--sh);transition:transform .3s;display:flex;align-items:center;gap:10px}
.toast.show{transform:translateX(-50%) translateY(0)}.toast i{color:var(--ok)}
.eco{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.ec{padding:10px 8px;background:var(--inp);border:2px solid var(--brd);border-radius:var(--r1);cursor:pointer;text-align:center;transition:all var(--tr);font-size:12px;font-weight:600;color:var(--t2)}
.ec:hover{border-color:var(--t3)}
.ec.on{border-color:var(--ac);background:var(--acg);color:var(--acl)}
.ec small{display:block;font-weight:400;font-size:10px;margin-top:2px;color:var(--t3)}
.li{display:flex;align-items:center;gap:6px;font-size:11.5px;color:var(--ok);font-weight:500;margin-left:auto}
.ld{width:7px;height:7px;background:var(--ok);border-radius:50%;animation:lp 2s ease-in-out infinite}
@keyframes lp{0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(0,184,148,.4)}50%{opacity:.7;box-shadow:0 0 0 6px rgba(0,184,148,0)}}
@media(max-width:960px){.app{grid-template-columns:1fr;padding:20px}.pp{position:relative;top:0;order:-1}header{padding:16px 20px}.hlinks{display:none}}
@media(max-width:600px){.tabs{overflow-x:auto}.sg{grid-template-columns:repeat(2,1fr)}.ig{grid-template-columns:repeat(4,1fr)}.cr{grid-template-columns:1fr}.logo-text .p1,.logo-text .p2{font-size:22px}}
    </style>
</head>
<body>
<div class="ambg"></div>
<header>
    <a class="logo" id="logo-link" href="/">
        <div class="logo-icon" id="logo-icon"><i class="fas fa-qrcode"></i></div>
        <div class="logo-text"><span class="p1" id="lt1">QR</span><span class="p2" id="lt2">Genius</span><span class="dot"></span></div>
    </a>
    <div class="hlinks" id="hlinks"></div>
</header>
<div class="app">
    <div class="panel">
        <div class="ph"><i class="fas fa-sliders-h"></i> QR Code Configuration</div>
        <div class="pb">
            <div class="tabs" id="dtabs">
                <button class="tab on" data-tab="url"><i class="fas fa-link"></i> URL</button>
                <button class="tab" data-tab="text"><i class="fas fa-font"></i> Text</button>
                <button class="tab" data-tab="email"><i class="fas fa-envelope"></i> Email</button>
                <button class="tab" data-tab="phone"><i class="fas fa-phone"></i> Phone</button>
                <button class="tab" data-tab="sms"><i class="fas fa-comment"></i> SMS</button>
                <button class="tab" data-tab="wifi"><i class="fas fa-wifi"></i> WiFi</button>
                <button class="tab" data-tab="vcard"><i class="fas fa-address-card"></i> vCard</button>
                <button class="tab" data-tab="event"><i class="fas fa-calendar"></i> Event</button>
            </div>
            <div class="tc on" id="tab-url"><div class="fg"><label>Website URL</label><input type="url" id="input-url" placeholder="https://example.com" value="https://qr.genius-space.org"></div></div>
            <div class="tc" id="tab-text"><div class="fg"><label>Text Content</label><textarea id="input-text" placeholder="Enter any text to encode..."></textarea></div></div>
            <div class="tc" id="tab-email"><div class="fg"><label>Email Address</label><input type="email" id="input-email" placeholder="hello@example.com"></div><div class="fg"><label>Subject <span class="hn">(optional)</span></label><input type="text" id="input-email-subject" placeholder="Email subject"></div><div class="fg"><label>Body <span class="hn">(optional)</span></label><textarea id="input-email-body" placeholder="Email body..."></textarea></div></div>
            <div class="tc" id="tab-phone"><div class="fg"><label>Phone Number</label><input type="tel" id="input-phone" placeholder="+1234567890"></div></div>
            <div class="tc" id="tab-sms"><div class="fg"><label>Phone Number</label><input type="tel" id="input-sms-phone" placeholder="+1234567890"></div><div class="fg"><label>Message <span class="hn">(optional)</span></label><textarea id="input-sms-body" placeholder="SMS message..."></textarea></div></div>
            <div class="tc" id="tab-wifi"><div class="wf"><div class="fg"><label>Network Name (SSID)</label><input type="text" id="input-wifi-ssid" placeholder="MyWiFiNetwork"></div><div class="fg"><label>Password</label><input type="text" id="input-wifi-pass" placeholder="WiFi password"></div><div class="fg"><label>Encryption</label><select id="input-wifi-enc"><option value="WPA">WPA/WPA2</option><option value="WEP">WEP</option><option value="nopass">None (Open)</option></select></div><div class="tr"><span>Hidden Network</span><div class="tg" id="wifi-hidden" data-active="false"></div></div></div></div>
            <div class="tc" id="tab-vcard"><div class="vf"><div class="cr"><div class="fg"><label>First Name</label><input type="text" id="input-vcard-fn" placeholder="John"></div><div class="fg"><label>Last Name</label><input type="text" id="input-vcard-ln" placeholder="Doe"></div></div><div class="fg"><label>Organization <span class="hn">(optional)</span></label><input type="text" id="input-vcard-org" placeholder="Company Inc."></div><div class="fg"><label>Phone</label><input type="tel" id="input-vcard-phone" placeholder="+1234567890"></div><div class="fg"><label>Email</label><input type="email" id="input-vcard-email" placeholder="john@example.com"></div><div class="fg"><label>Website <span class="hn">(optional)</span></label><input type="url" id="input-vcard-url" placeholder="https://example.com"></div></div></div>
            <div class="tc" id="tab-event"><div class="ef"><div class="fg"><label>Event Title</label><input type="text" id="input-event-title" placeholder="Meeting"></div><div class="fg"><label>Location <span class="hn">(optional)</span></label><input type="text" id="input-event-location" placeholder="123 Main St"></div><div class="fg"><label>Start Date &amp; Time</label><input type="datetime-local" id="input-event-start"></div><div class="fg"><label>End Date &amp; Time</label><input type="datetime-local" id="input-event-end"></div><div class="fg"><label>Description <span class="hn">(optional)</span></label><textarea id="input-event-desc" placeholder="Event details..."></textarea></div></div></div>

            <div class="sd"></div>
            <div class="st"><i class="fas fa-palette"></i> Dot Style</div>
            <div class="sg" id="dsg">
                <div class="so on" data-style="square"><div class="sp"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>Square</div>
                <div class="so" data-style="dots"><div class="sp"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>Dots</div>
                <div class="so" data-style="rounded"><div class="sp"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>Rounded</div>
                <div class="so" data-style="classy"><div class="sp"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>Classy</div>
                <div class="so" data-style="classy-rounded"><div class="sp"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>Classy Round</div>
                <div class="so" data-style="extra-rounded"><div class="sp"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>Extra Round</div>
            </div>
            <div class="sd"></div>
            <div class="st"><i class="fas fa-vector-square"></i> Corner Square Style</div>
            <div class="sg" id="csg"><div class="so on" data-style="square">Square</div><div class="so" data-style="dot">Dot</div><div class="so" data-style="extra-rounded">Rounded</div></div>
            <div class="sd"></div>
            <div class="st"><i class="fas fa-circle"></i> Corner Dot Style</div>
            <div class="sg" id="cdsg"><div class="so on" data-style="square">Square</div><div class="so" data-style="dot">Dot</div></div>
            <div class="sd"></div>
            <div class="st"><i class="fas fa-tint"></i> Colors</div>
            <div class="cr"><div class="fg"><label>Foreground</label><div class="cpw"><input type="color" id="cfg" value="#000000"><input type="text" class="hex-in" id="cfgh" value="#000000" maxlength="7" spellcheck="false"></div></div><div class="fg"><label>Background</label><div class="cpw"><input type="color" id="cbg" value="#ffffff"><input type="text" class="hex-in" id="cbgh" value="#ffffff" maxlength="7" spellcheck="false"></div></div></div>
            <div class="cr" style="margin-top:12px"><div class="fg"><label>Corner Square <span class="hn">(opt.)</span></label><div class="cpw"><input type="color" id="cc" value="#000000"><input type="text" class="hex-in" id="cch" value="#000000" maxlength="7" spellcheck="false"></div></div><div class="fg"><label>Corner Dot <span class="hn">(opt.)</span></label><div class="cpw"><input type="color" id="ccd" value="#000000"><input type="text" class="hex-in" id="ccdh" value="#000000" maxlength="7" spellcheck="false"></div></div></div>
            <div class="sd"></div>
            <div class="st"><i class="fas fa-shield-alt"></i> Error Correction</div>
            <div class="eco" id="eco"><div class="ec" data-ec="L">L<small>7%</small></div><div class="ec on" data-ec="M">M<small>15%</small></div><div class="ec" data-ec="Q">Q<small>25%</small></div><div class="ec" data-ec="H">H<small>30%</small></div></div>
            <p style="font-size:11px;color:var(--t3);margin-top:6px">Use Q or H when adding a center icon.</p>
            <div class="sd"></div>
            <div class="st"><i class="fas fa-expand-arrows-alt"></i> Size</div>
            <div class="fg"><label>QR Size: <strong id="sl">300px</strong></label><input type="range" id="qs" min="150" max="1000" value="300" step="10"><div class="rl"><span>150px</span><span>1000px</span></div></div>
            <div class="fg" style="margin-top:12px"><label>Margin: <strong id="ml">10</strong></label><input type="range" id="qm" min="0" max="50" value="10" step="1"><div class="rl"><span>0</span><span>50</span></div></div>
            <div class="sd"></div>
            <div class="st"><i class="fas fa-image"></i> Center Icon / Image</div>
            <div class="icon-src-tabs" id="isrc-tabs">
                <button class="icon-src-tab on" data-src="presets">Presets</button>
                <button class="icon-src-tab" data-src="fontawesome">FA</button>
                <button class="icon-src-tab" data-src="remix">Remix</button>
                <button class="icon-src-tab" data-src="nerd">Nerd</button>
                <button class="icon-src-tab" data-src="simple">Simple</button>
                <button class="icon-src-tab" data-src="upload">Upload</button>
            </div>

            <div class="icon-src-content on" id="isrc-presets">
                <div class="ig" id="icg">
                    <div class="io on" data-icon="none" title="None"><i class="fas fa-ban"></i></div>
                    <div class="io" data-icon="globe"><i class="fas fa-globe"></i></div>
                    <div class="io" data-icon="heart"><i class="fas fa-heart"></i></div>
                    <div class="io" data-icon="star"><i class="fas fa-star"></i></div>
                    <div class="io" data-icon="home"><i class="fas fa-home"></i></div>
                    <div class="io" data-icon="shopping"><i class="fas fa-shopping-cart"></i></div>
                    <div class="io" data-icon="music"><i class="fas fa-music"></i></div>
                    <div class="io" data-icon="camera"><i class="fas fa-camera"></i></div>
                    <div class="io" data-icon="wifi"><i class="fas fa-wifi"></i></div>
                    <div class="io" data-icon="lock"><i class="fas fa-lock"></i></div>
                    <div class="io" data-icon="envelope"><i class="fas fa-envelope"></i></div>
                    <div class="io" data-icon="phone"><i class="fas fa-phone-alt"></i></div>
                    <div class="io" data-icon="map"><i class="fas fa-map-marker-alt"></i></div>
                    <div class="io" data-icon="code"><i class="fas fa-code"></i></div>
                    <div class="io" data-icon="bolt"><i class="fas fa-bolt"></i></div>
                </div>
            </div>

            <div class="icon-src-content" id="isrc-fontawesome">
                <div class="cust-icon-row">
                    <div class="cust-icon-input"><div class="fg"><label>FontAwesome Icon Class</label><input type="text" id="fa-class" placeholder="fa-solid fa-rocket" spellcheck="false"></div></div>
                    <div class="cust-icon-preview" id="fa-prev"><i class="fas fa-icons"></i></div>
                </div>
                <div class="icon-src-hint">Browse icons at <a href="https://fontawesome.com/icons" target="_blank">fontawesome.com</a><br>Format: <code>fa-solid fa-name</code> or <code>fa-brands fa-name</code></div>
                <div class="cust-color-row"><label>Icon color</label><div class="cpw"><input type="color" id="fa-color" value="#000000"><input type="text" class="hex-in" id="fa-colorh" value="#000000" maxlength="7" spellcheck="false"></div></div>
            </div>

            <div class="icon-src-content" id="isrc-remix">
                <div class="cust-icon-row">
                    <div class="cust-icon-input"><div class="fg"><label>Remix Icon Class</label><input type="text" id="ri-class" placeholder="ri-rocket-line" spellcheck="false"></div></div>
                    <div class="cust-icon-preview" id="ri-prev"><i class="ri-apps-line"></i></div>
                </div>
                <div class="icon-src-hint">Browse icons at <a href="https://remixicon.com" target="_blank">remixicon.com</a> (v4.6)<br>Format: <code>ri-icon-name</code> (e.g. <code>ri-wifi-line</code>)</div>
                <div class="cust-color-row"><label>Icon color</label><div class="cpw"><input type="color" id="ri-color" value="#000000"><input type="text" class="hex-in" id="ri-colorh" value="#000000" maxlength="7" spellcheck="false"></div></div>
            </div>

            <div class="icon-src-content" id="isrc-nerd">
                <div class="cust-icon-row">
                    <div class="cust-icon-input"><div class="fg"><label>Nerd Font Icon Class</label><input type="text" id="nf-class" placeholder="nf-fa-linux" spellcheck="false"></div></div>
                    <div class="cust-icon-preview" id="nf-prev"><i class="nf nf-fa-terminal"></i></div>
                </div>
                <div class="icon-src-hint">Browse icons at <a href="https://www.nerdfonts.com/cheat-sheet" target="_blank">nerdfonts.com/cheat-sheet</a><br>Format: <code>nf-setname-iconname</code> (e.g. <code>nf-fa-linux</code>)</div>
                <div class="cust-color-row"><label>Icon color</label><div class="cpw"><input type="color" id="nf-color" value="#000000"><input type="text" class="hex-in" id="nf-colorh" value="#000000" maxlength="7" spellcheck="false"></div></div>
            </div>

            <div class="icon-src-content" id="isrc-simple">
                <div class="cust-icon-row">
                    <div class="cust-icon-input"><div class="fg"><label>Simple Icons Slug</label><input type="text" id="si-class" placeholder="github" spellcheck="false"></div></div>
                    <div class="cust-icon-preview" id="si-prev"><i class="fas fa-cube"></i></div>
                </div>
                <div class="icon-src-hint">Browse icons at <a href="https://icones.js.org/collection/simple-icons" target="_blank">icones.js.org</a> or <a href="https://simpleicons.org" target="_blank">simpleicons.org</a><br>Format: slug name (e.g. <code>github</code>, <code>discord</code>, <code>python</code>)</div>
                <div class="cust-color-row"><label>Icon color</label><div class="cpw"><input type="color" id="si-color" value="#000000"><input type="text" class="hex-in" id="si-colorh" value="#000000" maxlength="7" spellcheck="false"></div></div>
            </div>

            <div class="icon-src-content" id="isrc-upload">
                <div class="ua" id="ua"><i class="fas fa-cloud-upload-alt"></i><span id="ul">Click or drag to upload (PNG, JPG, SVG)</span><input type="file" id="ui" accept="image/*" hidden></div>
            </div>
            <div class="fg"><label>Icon Size: <strong id="isl">0.4</strong></label><input type="range" id="is" min="0.1" max="1.0" value="0.4" step="0.05"><div class="rl"><span>Small</span><span>Large</span></div></div>
            <div class="tr"><span>Hide dots behind icon</span><div class="tg on" id="ihd" data-active="true"></div></div>
        </div>
    </div>
    <div class="panel pp">
        <div class="ph"><i class="fas fa-eye"></i> Live Preview<div class="li"><div class="ld"></div> Auto-updating</div></div>
        <div class="ppa">
            <div class="qcw" id="qcw"><div id="qo"><div class="qph"><i class="fas fa-qrcode"></i><p>Your QR code will<br>appear here</p></div></div></div>
            <div class="dr"><button class="db" id="dp" disabled><i class="fas fa-file-image"></i> PNG</button><button class="db" id="ds" disabled><i class="fas fa-file-code"></i> SVG</button></div>
            <div class="ur-row"><button class="ur-btn" id="ubtn" disabled><i class="fas fa-undo"></i> Undo</button><button class="ur-btn" id="rbtn" disabled><i class="fas fa-redo"></i> Redo</button></div>
            <div class="qi" id="qi" style="display:none">Encoded: <code id="qd"></code></div>
        </div>
    </div>
</div>
<div class="toast" id="toast"><i class="fas fa-check-circle"></i> <span id="tm">Downloaded!</span></div>
<footer id="ft"></footer>
<script>
(function(){
'use strict';

// ═══════════════════════════════════════════════════════════════════════
//  SITE CONFIGURATION — Edit these values to customize your deployment
// ═══════════════════════════════════════════════════════════════════════
const CFG = {
    title: 'QR Genius — Advanced QR Code Generator',
    logoText: ['QR', 'Genius'],
    logoIcon: 'fas fa-qrcode',           // FontAwesome class
    logoLink: '/',
    faviconSVG: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="100" height="100" rx="16" fill="%236c5ce7"/><text x="50" y="70" font-size="54" font-family="sans-serif" fill="white" text-anchor="middle">QR</text></svg>',
    headerLinks: [
        { label: 'GitHub', icon: 'fab fa-github', url: 'https://github.com/nucl3arn30n/qr-genius', external: true }
    ],
    footerHTML: 'QR Genius &mdash; Built for <a href="https://qr.genius-space.org">qr.genius-space.org</a> &middot; Open Source',
    defaultURL: 'https://qr.genius-space.org'
};
// ═══════════════════════════════════════════════════════════════════════

document.title = CFG.title;
document.getElementById('lt1').textContent = CFG.logoText[0];
document.getElementById('lt2').textContent = CFG.logoText[1];
document.getElementById('logo-icon').innerHTML = '<i class="'+CFG.logoIcon+'"></i>';
document.getElementById('logo-link').href = CFG.logoLink;
document.getElementById('ft').innerHTML = '<p>'+CFG.footerHTML+'</p>';
document.getElementById('input-url').value = CFG.defaultURL;
if(CFG.faviconSVG) document.getElementById('dynamic-favicon').href='data:image/svg+xml,'+encodeURIComponent(CFG.faviconSVG);
var hc=document.getElementById('hlinks');
CFG.headerLinks.forEach(function(l){var a=document.createElement('a');a.className='hlink';a.href=l.url;if(l.external)a.target='_blank';a.innerHTML='<i class="'+l.icon+'"></i> '+l.label;hc.appendChild(a)});

var cTab='url',dSty='square',cSty='square',cdSty='square',ecLv='M',selIc='none',custImg=null,qrI=null,dbt=null;

function sched(){clearTimeout(dbt);dbt=setTimeout(gen,180)}

var iSVG={
globe:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><circle cx="256" cy="256" r="224" fill="none" stroke="#000" stroke-width="36"/><ellipse cx="256" cy="256" rx="90" ry="224" fill="none" stroke="#000" stroke-width="36"/><line x1="32" y1="256" x2="480" y2="256" stroke="#000" stroke-width="36"/><path d="M72 160h368M72 352h368" fill="none" stroke="#000" stroke-width="36"/></svg>',
heart:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#e74c3c" d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>',
star:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="#f39c12" d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"/></svg>',
home:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="#000" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/></svg>',
shopping:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="#000" d="M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"/></svg>',
music:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#000" d="M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75.02v184.63a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V32a32 32 0 0 0-41.62-30.49z"/></svg>',
camera:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#000" d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM256 368c70.7 0 128-57.3 128-128S326.7 112 256 112s-128 57.3-128 128 57.3 128 128 128zm0-224c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg>',
wifi:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="#000" d="M634.91 154.88C457.74-8.99 182.19-8.93 5.09 154.88c-6.66 6.16-6.79 16.59-.35 22.98l34.24 33.97c6.14 6.1 16.02 6.23 22.4.38 145.92-136.68 382.8-136.68 528.72 0 6.38 5.85 16.26 5.71 22.4-.38l34.24-33.97c6.43-6.39 6.3-16.82-.36-22.98zM320 352c-35.35 0-64 28.65-64 64s28.65 64 64 64 64-28.65 64-64-28.65-64-64-64zm202.67-83.59c-115.26-101.93-290.21-101.82-405.34 0-6.9 6.1-7.12 16.69-.57 23.15l34.44 33.99c6 5.92 15.66 6.32 22.05.8 83.95-72.57 209.45-72.57 293.44 0 6.39 5.52 16.05 5.13 22.05-.8l34.44-33.99c6.56-6.46 6.33-17.06-.57-23.15z"/></svg>',
lock:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="#000" d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"/></svg>',
envelope:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#000" d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/></svg>',
phone:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#000" d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"/></svg>',
map:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="#e74c3c" d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"/></svg>',
code:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="#000" d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg>',
bolt:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="#f39c12" d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288H175.5L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7H272.5L349.4 44.6z"/></svg>'
};

function mkIcon(n,s){var v=iSVG[n];if(!v)return null;s=s||200;var m=v.match(/viewBox="0 0 ([\d.]+) ([\d.]+)"/);var vw=m?parseFloat(m[1]):512,vh=m?parseFloat(m[2]):512;var pad=s*0.18;var area=s-pad*2;var sc=Math.min(area/vw,area/vh);var ox=pad+(area-vw*sc)/2;var oy=pad+(area-vh*sc)/2;var inner=v.replace(/<svg[^>]*>/,'').replace(/<\/svg>/,'');var w='<svg xmlns="http://www.w3.org/2000/svg" width="'+s+'" height="'+s+'" viewBox="0 0 '+s+' '+s+'"><rect width="'+s+'" height="'+s+'" rx="12" fill="white"/><g transform="translate('+ox+','+oy+') scale('+sc+')">'+inner+'</g></svg>';return 'data:image/svg+xml;base64,'+btoa(unescape(encodeURIComponent(w)))}

function bData(){
    switch(cTab){
        case'url':return document.getElementById('input-url').value||CFG.defaultURL;
        case'text':return document.getElementById('input-text').value||'Hello World';
        case'email':{var e=document.getElementById('input-email').value,s=document.getElementById('input-email-subject').value,b=document.getElementById('input-email-body').value,m='mailto:'+e,p=[];if(s)p.push('subject='+encodeURIComponent(s));if(b)p.push('body='+encodeURIComponent(b));if(p.length)m+='?'+p.join('&');return m}
        case'phone':return'tel:'+document.getElementById('input-phone').value;
        case'sms':{var ph=document.getElementById('input-sms-phone').value,bd=document.getElementById('input-sms-body').value;return bd?'sms:'+ph+'?body='+encodeURIComponent(bd):'sms:'+ph}
        case'wifi':{var ss=document.getElementById('input-wifi-ssid').value,pw=document.getElementById('input-wifi-pass').value,en=document.getElementById('input-wifi-enc').value,hd=document.getElementById('wifi-hidden').dataset.active==='true';return'WIFI:T:'+en+';S:'+ss+';P:'+pw+';H:'+(hd?'true':'false')+';;'}
        case'vcard':{var fn=document.getElementById('input-vcard-fn').value,ln=document.getElementById('input-vcard-ln').value,og=document.getElementById('input-vcard-org').value,vp=document.getElementById('input-vcard-phone').value,ve=document.getElementById('input-vcard-email').value,vu=document.getElementById('input-vcard-url').value,vc='BEGIN:VCARD\nVERSION:3.0\nN:'+ln+';'+fn+'\nFN:'+fn+' '+ln+'\n';if(og)vc+='ORG:'+og+'\n';if(vp)vc+='TEL:'+vp+'\n';if(ve)vc+='EMAIL:'+ve+'\n';if(vu)vc+='URL:'+vu+'\n';return vc+'END:VCARD'}
        case'event':{var ti=document.getElementById('input-event-title').value||'Event',lo=document.getElementById('input-event-location').value,st=document.getElementById('input-event-start').value,et=document.getElementById('input-event-end').value,de=document.getElementById('input-event-desc').value;function fm(d){return d?d.replace(/[-:]/g,'').replace('T','T')+'00':''}var ev='BEGIN:VCALENDAR\nBEGIN:VEVENT\nSUMMARY:'+ti+'\n';if(st)ev+='DTSTART:'+fm(st)+'\n';if(et)ev+='DTEND:'+fm(et)+'\n';if(lo)ev+='LOCATION:'+lo+'\n';if(de)ev+='DESCRIPTION:'+de+'\n';return ev+'END:VEVENT\nEND:VCALENDAR'}
        default:return CFG.defaultURL
    }
}

function gen(){
    var data=bData(),sz=+document.getElementById('qs').value,mg=+document.getElementById('qm').value,
    fg=document.getElementById('cfg').value,bg=document.getElementById('cbg').value,
    cc=document.getElementById('cc').value,cd=document.getElementById('ccd').value,
    ir=+document.getElementById('is').value,hd=document.getElementById('ihd').dataset.active==='true',
    img=null;
    if(custImg)img=custImg;else if(custIconData)img=custIconData;else if(selIc!=='none')img=mkIcon(selIc,200);
    var c={width:sz,height:sz,margin:mg,data:data,
        dotsOptions:{color:fg,type:dSty},
        backgroundOptions:{color:bg},
        cornersSquareOptions:{color:cc,type:cSty==='square'?'square':cSty},
        cornersDotOptions:{color:cd,type:cdSty==='square'?'square':cdSty},
        qrOptions:{errorCorrectionLevel:ecLv}};
    if(img){c.image=img;c.imageOptions={crossOrigin:'anonymous',margin:4,imageSize:ir,hideBackgroundDots:hd}}
    var o=document.getElementById('qo');o.innerHTML='';
    qrI=new QRCodeStyling(c);qrI.append(o);
    document.getElementById('dp').disabled=false;
    document.getElementById('ds').disabled=false;
    document.getElementById('qi').style.display='block';
    document.getElementById('qd').textContent=data.length>60?data.substring(0,60)+'...':data;
}

document.getElementById('dp').onclick=function(){if(qrI){qrI.download({name:'qr-genius',extension:'png'});toast('PNG downloaded!')}};
document.getElementById('ds').onclick=function(){if(qrI){qrI.download({name:'qr-genius',extension:'svg'});toast('SVG downloaded!')}};

document.querySelectorAll('#dtabs .tab').forEach(function(b){b.onclick=function(){
    document.querySelectorAll('#dtabs .tab').forEach(function(x){x.classList.remove('on')});
    b.classList.add('on');cTab=b.dataset.tab;
    document.querySelectorAll('.tc').forEach(function(x){x.classList.remove('on')});
    document.getElementById('tab-'+cTab).classList.add('on');sched()}});

function setupSG(id,fn){document.querySelectorAll('#'+id+' .so').forEach(function(o){o.onclick=function(){
    document.querySelectorAll('#'+id+' .so').forEach(function(x){x.classList.remove('on')});
    o.classList.add('on');fn(o.dataset.style);sched()}})}
setupSG('dsg',function(v){dSty=v});setupSG('csg',function(v){cSty=v});setupSG('cdsg',function(v){cdSty=v});

// ===================== ICON SOURCE TABS =====================
var curIconSrc='presets',custIconData=null;
document.querySelectorAll('#isrc-tabs .icon-src-tab').forEach(function(t){t.onclick=function(){
    document.querySelectorAll('#isrc-tabs .icon-src-tab').forEach(function(x){x.classList.remove('on')});
    t.classList.add('on');curIconSrc=t.dataset.src;
    document.querySelectorAll('.icon-src-content').forEach(function(x){x.classList.remove('on')});
    document.getElementById('isrc-'+curIconSrc).classList.add('on');
    // when switching to presets with "none" selected, clear custom
    if(curIconSrc==='presets'&&selIc==='none'){custIconData=null;custImg=null;sched()}
}});

document.querySelectorAll('#icg .io').forEach(function(o){o.onclick=function(){
    document.querySelectorAll('#icg .io').forEach(function(x){x.classList.remove('on')});
    o.classList.add('on');selIc=o.dataset.icon;
    custImg=null;custIconData=null;
    document.getElementById('ua').classList.remove('has');document.getElementById('ul').textContent='Click or drag to upload (PNG, JPG, SVG)';
    sched()}});

// ===================== RENDER CSS ICON TO DATA URL =====================
function renderIconToDataURL(iconClass,color,cb){
    var canvas=document.createElement('canvas');canvas.width=400;canvas.height=400;
    var ctx=canvas.getContext('2d');
    // white background with rounded corners
    ctx.fillStyle='#ffffff';
    ctx.beginPath();ctx.roundRect(0,0,400,400,24);ctx.fill();
    // render icon offscreen
    var tmp=document.createElement('div');
    tmp.style.cssText='position:fixed;left:-9999px;top:-9999px;width:400px;height:400px;display:flex;align-items:center;justify-content:center;font-size:240px;color:'+(color||'#000000')+';line-height:1;';
    var ic=document.createElement('i');
    iconClass.trim().split(/\s+/).forEach(function(c){ic.classList.add(c)});
    tmp.appendChild(ic);document.body.appendChild(tmp);
    // wait for font to render
    setTimeout(function(){
        var rect=ic.getBoundingClientRect();
        // use html2canvas approach via foreignObject
        var svgStr='<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400"><foreignObject width="400" height="400"><div xmlns="http://www.w3.org/1999/xhtml" style="width:400px;height:400px;display:flex;align-items:center;justify-content:center;font-size:240px;color:'+(color||'#000')+';line-height:1;background:#fff;border-radius:24px;">'+tmp.innerHTML+'</div></foreignObject></svg>';
        // This won't work due to CORS on fonts, so use canvas text fallback
        // Instead, get computed content and draw it
        var cs=getComputedStyle(ic,':before');
        var charCode=cs.content;
        if(charCode&&charCode!=='none'&&charCode!=='normal'){
            charCode=charCode.replace(/['"]/g,'');
            var ff=getComputedStyle(ic).fontFamily;
            var fw=getComputedStyle(ic).fontWeight;
            ctx.font=fw+' 240px '+ff;
            ctx.fillStyle=color||'#000000';
            ctx.textAlign='center';ctx.textBaseline='middle';
            ctx.fillText(charCode,200,210);
        }
        document.body.removeChild(tmp);
        cb(canvas.toDataURL('image/png'));
    },150);
}

// ===================== SIMPLE ICONS FETCHER =====================
var siCache={};
function fetchSimpleIcon(slug,color,cb){
    slug=slug.toLowerCase().trim().replace(/\s+/g,'');
    if(siCache[slug]){
        var svg=siCache[slug].replace(/<svg /,'<svg fill="'+(color||'#000')+'" ');
        var wrapped='<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><rect width="400" height="400" rx="24" fill="white"/><g transform="translate(70,70) scale(10.833)">'+svg.replace(/<svg[^>]*>/,'').replace(/<\/svg>/,'')+'</g></svg>';
        cb('data:image/svg+xml;base64,'+btoa(unescape(encodeURIComponent(wrapped))));
        return;
    }
    fetch('https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/'+slug+'.svg')
    .then(function(r){if(!r.ok)throw new Error('Not found');return r.text()})
    .then(function(svg){
        siCache[slug]=svg;
        svg=svg.replace(/<svg /,'<svg fill="'+(color||'#000')+'" ');
        var wrapped='<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><rect width="400" height="400" rx="24" fill="white"/><g transform="translate(70,70) scale(10.833)">'+svg.replace(/<svg[^>]*>/,'').replace(/<\/svg>/,'')+'</g></svg>';
        cb('data:image/svg+xml;base64,'+btoa(unescape(encodeURIComponent(wrapped))));
    })
    .catch(function(){cb(null)});
}

// ===================== CUSTOM ICON INPUT HANDLERS =====================
function setupCustomIcon(prefix,prevId){
    var inp=document.getElementById(prefix+'-class');
    var prev=document.getElementById(prefix+'-prev');
    var cpick=document.getElementById(prefix+'-color');
    var chex=document.getElementById(prefix+'-colorh');
    if(cpick&&chex){
        cpick.oninput=function(){chex.value=cpick.value;triggerCustom()};
        chex.oninput=function(){var v=chex.value;if(v.charAt(0)!=='#')v='#'+v;if(/^#[0-9a-fA-F]{6}$/.test(v)){cpick.value=v;triggerCustom()}};
        chex.onblur=function(){var v=chex.value;if(v.charAt(0)!=='#')v='#'+v;if(/^#[0-9a-fA-F]{6}$/.test(v)){chex.value=v;cpick.value=v}else{chex.value=cpick.value}};
    }
    function triggerCustom(){
        var val=inp.value.trim();
        if(!val){custIconData=null;custImg=null;prev.classList.remove('ok');prev.innerHTML='<i class="fas fa-icons"></i>';sched();return}
        var color=cpick?cpick.value:'#000000';
        if(prefix==='si'){
            prev.innerHTML='<i class="fas fa-spinner fa-spin"></i>';
            fetchSimpleIcon(val,color,function(url){
                if(url){
                    custIconData=url;custImg=null;selIc='none';
                    document.querySelectorAll('#icg .io').forEach(function(x){x.classList.remove('on')});
                    document.querySelector('#icg .io[data-icon="none"]').classList.add('on');
                    prev.innerHTML='<img src="'+url+'">';prev.classList.add('ok');
                }else{
                    custIconData=null;prev.innerHTML='<i class="fas fa-times" style="color:var(--danger)"></i>';prev.classList.remove('ok');
                }
                sched();
            });
        }else{
            // CSS font icon
            var cls=val;
            if(prefix==='nf'&&val.indexOf('nf ')!==0) cls='nf '+val;
            renderIconToDataURL(cls,color,function(url){
                custIconData=url;custImg=null;selIc='none';
                document.querySelectorAll('#icg .io').forEach(function(x){x.classList.remove('on')});
                document.querySelector('#icg .io[data-icon="none"]').classList.add('on');
                prev.innerHTML='<i class="'+cls+'" style="color:'+color+'"></i>';prev.classList.add('ok');
                sched();
            });
        }
    }
    var debTm;
    inp.addEventListener('input',function(){clearTimeout(debTm);debTm=setTimeout(triggerCustom,400)});
}
setupCustomIcon('fa','fa-prev');
setupCustomIcon('ri','ri-prev');
setupCustomIcon('nf','nf-prev');
setupCustomIcon('si','si-prev');

document.querySelectorAll('#eco .ec').forEach(function(o){o.onclick=function(){
    document.querySelectorAll('#eco .ec').forEach(function(x){x.classList.remove('on')});
    o.classList.add('on');ecLv=o.dataset.ec;sched()}});

[['cfg','cfgh'],['cbg','cbgh'],['cc','cch'],['ccd','ccdh']].forEach(function(p){
    var picker=document.getElementById(p[0]),hex=document.getElementById(p[1]);
    picker.oninput=function(){hex.value=picker.value;sched()};
    hex.oninput=function(){var v=hex.value;if(v.charAt(0)!=='#')v='#'+v;if(/^#[0-9a-fA-F]{6}$/.test(v)){picker.value=v;sched()}};
    hex.onblur=function(){var v=hex.value;if(v.charAt(0)!=='#')v='#'+v;if(/^#[0-9a-fA-F]{6}$/.test(v)){hex.value=v;picker.value=v}else{hex.value=picker.value}}});

// ===================== UNDO / REDO =====================
var hist=[],hIdx=-1,maxHist=50,skipSnap=false;
function snap(){
    if(skipSnap)return;
    var s={tab:cTab,dSty:dSty,cSty:cSty,cdSty:cdSty,ecLv:ecLv,selIc:selIc,custImg:custImg,custIconData:custIconData,
        cfg:document.getElementById('cfg').value,cbg:document.getElementById('cbg').value,
        cc:document.getElementById('cc').value,ccd:document.getElementById('ccd').value,
        qs:document.getElementById('qs').value,qm:document.getElementById('qm').value,
        is:document.getElementById('is').value,ihd:document.getElementById('ihd').dataset.active,
        wh:document.getElementById('wifi-hidden').dataset.active};
    document.querySelectorAll('.pb input[type="text"],.pb input[type="url"],.pb input[type="email"],.pb input[type="tel"],.pb input[type="datetime-local"],.pb textarea,.pb select').forEach(function(el){if(el.id&&!el.classList.contains('hex-in'))s['f_'+el.id]=el.value});
    if(hIdx<hist.length-1)hist.splice(hIdx+1);
    hist.push(JSON.stringify(s));
    if(hist.length>maxHist)hist.shift();
    hIdx=hist.length-1;
    updUR()
}
function restore(json){
    skipSnap=true;
    var s=JSON.parse(json);
    cTab=s.tab;dSty=s.dSty;cSty=s.cSty;cdSty=s.cdSty;ecLv=s.ecLv;selIc=s.selIc;custImg=s.custImg;custIconData=s.custIconData||null;
    document.querySelectorAll('#dtabs .tab').forEach(function(b){b.classList.toggle('on',b.dataset.tab===cTab)});
    document.querySelectorAll('.tc').forEach(function(c){c.classList.toggle('on',c.id==='tab-'+cTab)});
    [['dsg',dSty],['csg',cSty],['cdsg',cdSty]].forEach(function(g){document.querySelectorAll('#'+g[0]+' .so').forEach(function(o){o.classList.toggle('on',o.dataset.style===g[1])})});
    document.querySelectorAll('#eco .ec').forEach(function(o){o.classList.toggle('on',o.dataset.ec===ecLv)});
    document.querySelectorAll('#icg .io').forEach(function(o){o.classList.toggle('on',o.dataset.icon===selIc)});
    [['cfg','cfgh'],['cbg','cbgh'],['cc','cch'],['ccd','ccdh']].forEach(function(p){document.getElementById(p[0]).value=s[p[0]];document.getElementById(p[1]).value=s[p[0]]});
    document.getElementById('qs').value=s.qs;document.getElementById('sl').textContent=s.qs+'px';
    document.getElementById('qm').value=s.qm;document.getElementById('ml').textContent=s.qm;
    document.getElementById('is').value=s.is;document.getElementById('isl').textContent=s.is;
    var ihd=document.getElementById('ihd');ihd.dataset.active=s.ihd;ihd.classList.toggle('on',s.ihd==='true');
    var wh=document.getElementById('wifi-hidden');wh.dataset.active=s.wh;wh.classList.toggle('on',s.wh==='true');
    if(custImg){document.getElementById('ua').classList.add('has')}else{document.getElementById('ua').classList.remove('has');document.getElementById('ul').textContent='Click or drag to upload (PNG, JPG, SVG)'}
    Object.keys(s).forEach(function(k){if(k.indexOf('f_')===0){var el=document.getElementById(k.substring(2));if(el)el.value=s[k]}});
    skipSnap=false;gen();updUR()
}
function updUR(){document.getElementById('ubtn').disabled=hIdx<=0;document.getElementById('rbtn').disabled=hIdx>=hist.length-1}
document.getElementById('ubtn').onclick=function(){if(hIdx>0){hIdx--;restore(hist[hIdx])}};
document.getElementById('rbtn').onclick=function(){if(hIdx<hist.length-1){hIdx++;restore(hist[hIdx])}};
var origSched=sched;
sched=function(){clearTimeout(dbt);dbt=setTimeout(function(){gen();snap()},180)};
// initial snapshot
setTimeout(function(){snap()},400);

document.getElementById('qs').oninput=function(e){document.getElementById('sl').textContent=e.target.value+'px';sched()};
document.getElementById('qm').oninput=function(e){document.getElementById('ml').textContent=e.target.value;sched()};
document.getElementById('is').oninput=function(e){document.getElementById('isl').textContent=e.target.value;sched()};

document.querySelectorAll('.tg').forEach(function(t){t.onclick=function(){
    var a=t.dataset.active==='true';t.dataset.active=!a;t.classList.toggle('on',!a);sched()}});

document.querySelectorAll('.pb input[type="text"],.pb input[type="url"],.pb input[type="email"],.pb input[type="tel"],.pb input[type="datetime-local"],.pb textarea,.pb select').forEach(function(el){
    el.addEventListener('input',sched);el.addEventListener('change',sched)});

var uaEl=document.getElementById('ua'),uiEl=document.getElementById('ui');
uaEl.onclick=function(){uiEl.click()};
uaEl.ondragover=function(e){e.preventDefault();uaEl.style.borderColor='var(--ac)'};
uaEl.ondragleave=function(){uaEl.style.borderColor=''};
uaEl.ondrop=function(e){e.preventDefault();uaEl.style.borderColor='';if(e.dataTransfer.files.length)hFile(e.dataTransfer.files[0])};
uiEl.onchange=function(){if(uiEl.files.length)hFile(uiEl.files[0])};
function hFile(f){if(!f.type.startsWith('image/'))return;var r=new FileReader();r.onload=function(e){
    custImg=e.target.result;selIc='none';custIconData=null;
    document.querySelectorAll('#icg .io').forEach(function(x){x.classList.remove('on')});
    document.querySelector('#icg .io[data-icon="none"]').classList.add('on');
    uaEl.classList.add('has');document.getElementById('ul').textContent=f.name;sched()};r.readAsDataURL(f)}

function toast(m){var t=document.getElementById('toast');document.getElementById('tm').textContent=m;t.classList.add('show');setTimeout(function(){t.classList.remove('show')},2500)}

setTimeout(gen,300);
})();
</script>
</body>
</html>
